!function(){"use strict";window.jQuery;const e=(e,t="error")=>`<div class="sui-notice sui-notice-${t}">\n\t\t\t\t\t\t\t<div class="sui-notice-content">\n\t\t\t\t\t\t\t\t<div class="sui-notice-message">\n\t\t\t\t\t\t\t\t\t<span class="sui-notice-icon sui-icon-info sui-md" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t<p>${e}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`,{__:t}=wp.i18n;!function(n){const a={"dall-e-3":["1024x1024","1792x1024","1024x1792"],"dall-e-2":["256x256","512x512","1024x1024"]},i=n("#image_generator_model"),o=n("#image_count"),r=n("#handywriter-image-generator-form");function s(){const e=i.val();l(),n("#image-style-row").toggle("dall-e-3"===e),n("#image-count-row").toggle("dall-e-3"!==e),n("#enable-hd-row").hide(),"dall-e-3"===e&&n("#image_count").val(1).trigger("change")}function l(){const e=i.val(),t=a[e].map((e=>`<option value="${e}">${e}</option>`)).join("");n("#image_generator_image_size").html(t)}function d(a){a.preventDefault();const i=n("#handywriter_image_generator_nonce").val(),o=n("#handywriter_ajax_url").val(),s=n("#hw-image-generator-result-msg"),l=n("#submit-image-generate"),d=n("#image-generation-results");n.post(o,{beforeSend:()=>{n("#image-generation-placeholder-results").show(),s.empty(),l.addClass("sui-button-onload-text")},action:"handywriter_image_generator",nonce:i,data:r.serialize()}).done((t=>{if(t.success)n("#image-generation-placeholder-results").hide(),d.prepend(t.data.html);else{const n=e(t.data.message,"error");s.html(n).addClass("sui-padding-bottom")}})).fail((()=>{const n=e(t("An error occurred while processing the request.","handywriter"),"error");s.html(n).addClass("sui-padding-bottom")})).always((()=>{l.removeClass("sui-button-onload-text")}))}function c(){const e=document.getElementById("image-generation-placeholder-results"),t=document.getElementById("image_count");if(e&&t){const n=parseInt(t.value,10)||0,a=new Array(n).fill(null).map(((e,t)=>`\n            <div class="image-card">\n                <div class="placeholder-col">\n                    \x3c!-- Placeholder content for item ${t+1} --\x3e\n                </div>\n            </div>\n        `)).join("");e.innerHTML=`<div class="sui-row hw-generated-image-result-set">${a}</div>`}}function g(a){a.preventDefault();const i=n(this),o=n("#handywriter_image_generator_nonce").val(),r=n("#handywriter_ajax_url").val(),s=i.parent("div"),l=i.parent("div").data("image-url"),d=i.parent("div").data("image-prompt");n.post(r,{beforeSend:()=>{i.addClass("sui-button-onload-text")},action:"handywriter_image_save_to_media_library",nonce:o,image_url:l,prompt:d}).done((t=>{if(t.success){const n=e(t.data.message,"success");s.html(n)}else{const n=e(t.data.message,"error");s.html(n),setTimeout((()=>{s.html(i)}),3e3)}})).fail((()=>{const n=e(t("An error occurred while processing the request.","handywriter"),"error");s.html(n),setTimeout((()=>{s.html(i)}),3e3)})).always((()=>{i.removeClass("sui-button-onload-text")}))}r.length&&(l(),c(),i.on("change",s),o.on("change",c),r.on("submit",d),n("#hw-image-generator-section").on("click",".hw-save-generated-image-btn",g))}(jQuery)}();